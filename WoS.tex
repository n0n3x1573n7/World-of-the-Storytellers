\documentclass[11pt]{report}
%Use \documentclass[12pt]{book} to printout and make it into a book
\renewcommand{\numberline}[1]{#1~}

\newif\ifDLC
\DLCfalse %\DLCtrue or \DLCfalse

\newif\iffullchangelog
\fullchangelogfalse %\fullchangelogtrue or \fullchangelogfalse

\newcommand{\version}{2.0.3}

%\usepackage{kotex}
\usepackage{CJKutf8}

\usepackage[utf8]{inputenc}
\usepackage[OT1, T2A]{fontenc}

\usepackage{imakeidx}
\indexsetup{othercode=\footnotesize}
\makeindex[columns=3, title={이야기 찾아보기}]
\let\oldindex\index
\renewcommand*{\index}[1]{\oldindex{#1}\ignorespaces}
\makeatletter
\def\indexspace{}
\makeatother

\usepackage{fontspec}
\setmainfont[ItalicFont={*},ItalicFeatures={FakeSlant=.167}]{NanumBarunGothic}
\newfontfamily{\storyfont}[Scale=1.1]{SDMiSaeng.ttf}

\usepackage[hidelinks,unicode,bookmarks=true]{hyperref}
\usepackage[usenames,dvipsnames]{color}
\usepackage[round]{natbib}
\hypersetup{colorlinks,
	citecolor=Red,
	linkcolor=Green,
	urlcolor=Blue}

\usepackage[nobottomtitles]{titlesec}
\titleformat*{\section}{\LARGE\bfseries}
\titleformat*{\subsection}{\Large\bfseries}
\titleformat*{\subsubsection}{\Large\bfseries}

\usepackage{fancyvrb}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
%\usepackage{relsize}
\usepackage{centernot}
\usepackage[top=2cm, left=2cm, right=2cm, bottom=2cm]{geometry}
\usepackage{titling}
%\usepackage{lipsum}
\usepackage{standalone}
\usepackage{enumitem}
\setlist{nosep}%{topsep=0pt,itemsep=0pt,parsep=0pt,before=\vspace{0mm},after=\vspace{0mm}}

\usepackage{etoolbox}
\AfterEndEnvironment{enumerate}{\vskip-\lastskip}
\AfterEndEnvironment{itemize}{\vskip-\lastskip}

\usepackage{multirow}
\usepackage{ulem}
\usepackage{bm}
\usepackage{tikz}
\usepackage{mdframed}

\usepackage[
type={CC},
modifier={by-nc-sa},
version={4.0},
]{doclicense}

\usepackage[yyyymmdd]{datetime}

\usepackage{makecell}

\usepackage{minitoc}
\noptcrule
\doparttoc

\usepackage{chngcntr}
\counterwithin*{chapter}{part}

\usepackage{setspace}
\renewcommand{\baselinestretch}{1.2}

\setlength{\droptitle}{-3em}

\renewcommand\mtcgapbeforeheads{0pt}

\usepackage{arydshln}

\usepackage{xifthen}
\usepackage{xparse}

\makeatletter
\newcommand\footnoteref[1]{\protected@xdef\@thefnmark{\ref{#1}}\@footnotemark}
\makeatother

\usepackage{colortbl}
\arrayrulecolor{black}

\setlength\dashlinedash{0.6pt}
\setlength\dashlinegap{2.0pt}
\setlength\arrayrulewidth{0.6pt}
\newcommand{\basesepline}{\hdashline}

\newcommand{\widthratio}{0.975}

\newenvironment{tightcenter}{%
	\setlength\topsep{0pt}%
	\setlength\parskip{0pt}%
	\par\centering}{\par\smallskip\noindent\ignorespacesafterend}

\usepackage[breakable]{tcolorbox}
\usepackage{tabularx}

\makeatletter
\tcbset{
	tabular/.style={
		boxsep=\z@,top=\z@,bottom=\z@,leftupper=\z@,rightupper=\z@,
		toptitle=1mm,bottomtitle=1mm,boxrule=0.5mm,
		before upper={\def\arraystretch{1.1}\tcb@hack@currenvir\tabular{#1}},
		after upper=\endtabular\arrayrulecolor{black}},
}
\makeatother

%environment for WoT(lite) stories, appears on index
\newenvironment{lite}[2][]
{ \ignorespaces \par
	\noindent
	\begin{tightcenter}
		\begin{tcolorbox}[standard jigsaw, opacityback=0, colframe=black!75!black, width=\linewidth, breakable, tabular={|p{\widthratio\linewidth}|}, title={\large \centering \ifthenelse{\isempty{#1}}{\textbf{[#2]}}{\hypertarget{#1}{\textbf{[#2]}}} \index{#2}}]
		}
		{
		\end{tcolorbox}
	\end{tightcenter}
	\par
}

%environment for normal stories, appears on index
\newenvironment{story}[3][]
{ \ignorespaces \par
	\noindent
	\begin{tightcenter}
		\begin{tcolorbox}[standard jigsaw, opacityback=0, colframe=black!75!black, width=\linewidth, breakable, tabular={|p{\widthratio\linewidth}|}, title={\large \centering \ifthenelse{\isempty{#1}}{\textbf{[#2]}}{\hypertarget{#1}{\textbf{[#2]}}} \index{#2}}]
			\textbf{속성}: #3
			\\\hline
			\ignorespaces\unskip
			}
			{
		\end{tcolorbox}
	\end{tightcenter}
	\par
}

\newcommand{\storyref}[2]{\hyperlink{#1}{\textnormal{[#2]}}}

\newcounter{qnactr}

\newenvironment{faq}[1]
{
		\refstepcounter{qnactr}
		\par\smallbreak
		\textbf{\large Q\theqnactr. #1}
		\newline\rmfamily
		A\theqnactr.
}
{\par\smallbreak}

\newcommand{\statchange}[2]
{
	\textbf{스탯 #1}: #2
}

\newcommand{\entry}[2][\basesepline]
{
	\ignorespaces#2\ignorespaces\unskip\\#1
}

\newcommand{\subject}[2][\basesepline]
{
	\entry[#1]{\makecell{\centering \textbf{#2}}}
}

\newcommand{\positive}[2][\basesepline]
{
	\entry[#1]{\textbf{긍정적}: #2}
}

\newcommand{\negative}[2][\basesepline]
{
	\entry[#1]{\textbf{부정적}: #2}
}

\newcommand{\neutral}[2][\basesepline]
{
	\entry[#1]{\textbf{중립적}: #2}
}

\newcommand{\pre}[2][\basesepline]
{
	\entry[#1]{\textbf{필요 조건}: \textit{#2}}
}

\newcommand{\cost}[2][\hline]
{
	\entry[#1]{\textbf{개연성 코스트}: #2}
}

\newcommand{\limitedtrauma}[3][\basesepline]
{
	\entry[#1]{\textbf{제약}\ifthenelse{\isempty{#2}}{}{\textbf{(#2)}}: #3}
}

\newcommand{\triggertrauma}[4][\basesepline]
{
	\entry[#1]{\textbf{트리거}\ifthenelse{\isempty{#2}}{}{\textbf{(#2)}}: #3\\\textbf{효과}: #4}
}

\newcommand{\flavour}[2][\basesepline]
{
	\entry[#1]{{\storyfont\Large#2}}
}

\newcommand{\world}[1]{{\storyfont\Large#1\par}}

\setlength\parindent{0pt}

\renewenvironment{center}
{\smallskip\parskip=0pt\par\nopagebreak\centering}
{\par\noindent\ignorespacesafterend\smallskip}

\usepackage{fancyhdr}
\ifDLC
	\pagestyle{fancy}
	\fancyhf{}
	\cfoot{\thepage}
	\rhead{\textcolor{red}{DLC ENABLED}}
	\lhead{\textcolor{red}{DLC ENABLED}}
	\rfoot{\textcolor{red}{DLC ENABLED}}
	\lfoot{\textcolor{red}{DLC ENABLED}}
\fi

\title{
	World of the Storytellers\\
	이야기꾼의 세계\\
	\large version \version\\
	Last Update: \today
	\ifDLC{\\ \textcolor{red}{DLC ENABLED}}\fi
}

\author{None(\href{https://www.twitter.com/n0n3x1573n7_WS}{@n0n3x1573n7\_WS})}

\date{}

\begin{document}
	%original: https://docs.google.com/document/d/1CewodUdP8zI3f81ktz6iiZYG4b1cFzARG2g1HFeswzg/edit
	\maketitle

	\vspace*{\fill}
	{\doclicenseThis}
	
	\setcounter{tocdepth}{-1}
	
	\tableofcontents
	
	\part{이야기꾼의 세계 \\ World of the Storytellers}
		\input{./Chapters/Main.tex}
	
	\part{이야기의 방랑자들 \\ Wanderers of the Tales}
		\input{./Chapters/Lite.tex}
	
	\part{서플리먼트: 예시 이야기들}
		\input{./Chapters/Supplements.tex}
	
	\part{정리}
		\chapter*{FAQ}
			\input{./Chapters/FAQ.tex}
		
		\chapter*{패치 노트}
			\input{./Chapters/패치노트.tex}
		
			\printindex
	
	\vspace*{\fill}
	{\doclicenseThis}
	
\end{document}